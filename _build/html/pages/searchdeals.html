<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Search for nearby deals &mdash; CM Live Deal 1.0.0-beta documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.0-beta',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="CM Live Deal 1.0.0-beta documentation" href="../index.html" />
    <link rel="next" title="Tools" href="tools.html" />
    <link rel="prev" title="User statistics" href="userstats.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="tools.html" title="Tools"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="userstats.html" title="User statistics"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">CM Live Deal 1.0.0-beta documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="search-for-nearby-deals">
<span id="ref-search"></span><h1>Search for nearby deals<a class="headerlink" href="#search-for-nearby-deals" title="Permalink to this headline">¶</a></h1>
<p>By using CM Live Deal Search module, user can search for deals in all cities, in a specific city or deals near user.</p>
<p>You can check <a class="reference internal" href="configuration.html#ref-mod-cmlivedeal-search"><em>CM Live Deal Search module</em></a> section to know how to setup the search  module.</p>
<p>To detect user&#8217;s location, You can use GeoLite2 data created by MaxMind, available from <a class="reference external" href="http://www.maxmind.com">http://www.maxmind.com</a>, or use HTML5 Geolocation service.</p>
<p>MaxMind service works on server side so it works in all browsers. HTML5 Geolocation works on client side, and not all browsers support HTML5 Geolocation, so dectecting user&#8217;s location is not possible if user&#8217;s browsrs is not supported.</p>
<div class="section" id="get-geolite2-city-database">
<h2>Get GeoLite2 City database<a class="headerlink" href="#get-geolite2-city-database" title="Permalink to this headline">¶</a></h2>
<p>GeoLite2 City is required to detect user&#8217;s location. Because the database file&#8217;s size is big, we don&#8217;t include it in CM Live Deal&#8217;s package, you need to download it from MaxMind website then upload it to your server manually.</p>
<p>Go to <a class="reference external" href="http://dev.maxmind.com/geoip/geoip2/geolite2/">http://dev.maxmind.com/geoip/geoip2/geolite2/</a>, download the gzipped binary file of GeoLite2 City.</p>
<img alt="../_images/maxmind.jpg" src="../_images/maxmind.jpg" />
<p>Use your favorite file compression software to uncompress the downloaded file, then you get the file GeoLite2-City.mmdb, upload this file to &lt;Joomla! root folder&gt;/administrator/components/com_cmlivedeal/helpers/geoip/database/ folder.</p>
</div>
<div class="section" id="configure-cm-live-deal-component">
<h2>Configure CM Live Deal component<a class="headerlink" href="#configure-cm-live-deal-component" title="Permalink to this headline">¶</a></h2>
<p>In your Joomla! back-end you go to Components -&gt; CM Live Deal.</p>
<img alt="../_images/com_cmlivedeal_menu.jpg" src="../_images/com_cmlivedeal_menu.jpg" />
<p>On the toolbar, you click &#8220;Options&#8221; button.</p>
<img alt="../_images/com_cmlivedeal_dashboard.jpg" src="../_images/com_cmlivedeal_dashboard.jpg" />
<p>Go to &#8220;Deal&#8221; tab, you select the Geolocatin service, set the radius (in kilometer) to search for nearby deals from user&#8217;s location and set the cookie lifetime.</p>
<img alt="../_images/com_cmlivedeal_deal.jpg" src="../_images/com_cmlivedeal_deal.jpg" />
<ul class="simple">
<li><strong>Geolocation service</strong>: The service you use to detect user&#8217;s location.</li>
<li><strong>Search radius from user&#8217;s location</strong>: The radius in kilometer to search for nearby deals of user. Default is 5 kilometers. This value is used when user searches for deals in his/her location by using the search module.</li>
<li><strong>Location cookie&#8217;s lifetime</strong>: Detect user&#8217;s location requires reading the database file and make the server slow. User&#8217;s location can be stored in cookie and reused later to reduce file reads from server. With this option you can set how many days this cookie is available. Default value is 7 (days). You can disable storing cookie by using 0 value.</li>
</ul>
</div>
<div class="section" id="search-in-front-end">
<h2>Search in front-end<a class="headerlink" href="#search-in-front-end" title="Permalink to this headline">¶</a></h2>
<p>Go to your front-end where the search module is displayed. Now if you select &#8220;Your location&#8221; in the city list and search, you will get the deals near you in the result.</p>
<img alt="../_images/search_dropdown.jpg" src="../_images/search_dropdown.jpg" />
<p>If the database file doesn&#8217;t exist, this function doesn&#8217;t work.</p>
<p>If your location can not be detected (not in MaxMind&#8217;s database), you will see the error message &#8220;We can&#8217;t detect your current location.&#8221;.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Search for nearby deals</a><ul>
<li><a class="reference internal" href="#get-geolite2-city-database">Get GeoLite2 City database</a></li>
<li><a class="reference internal" href="#configure-cm-live-deal-component">Configure CM Live Deal component</a></li>
<li><a class="reference internal" href="#search-in-front-end">Search in front-end</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="userstats.html"
                        title="previous chapter">User statistics</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="tools.html"
                        title="next chapter">Tools</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/pages/searchdeals.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="tools.html" title="Tools"
             >next</a> |</li>
        <li class="right" >
          <a href="userstats.html" title="User statistics"
             >previous</a> |</li>
        <li><a href="../index.html">CM Live Deal 1.0.0-beta documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, CMExtension.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>